# TG-SYSTEM Master Development Sequence

본 문서는 **TG-SYSTEM (Enterprise Platform)** 구축을 위한 단계별 개발 순서를 정의합니다.
개발은 **[인프라 -> 백엔드 코어 -> 비즈니스 API -> 프론트엔드 -> 통합]** 순서로 진행됩니다.

---

## 🏗️ PHASE 1: 기초 및 상거래 (Core & Commerce)
**목표**: 데이터를 저장할 공간을 만들고, 물건을 사고파는 핵심 기능을 완성한다.

### Step 1. 인프라 및 DB 설계 (Completed ✅)
1.  **프로젝트 스캐폴딩**: 폴더 구조(`src/core`, `src/commerce`) 생성.
2.  **마스터 DB (V3) 구축**:
    *   `Identity`: 사용자, 점주, 권한 관리.
    *   `Commerce`: 상점, 상품, 주문 테이블 정의.
3.  **보안 커널**: 비밀번호 해싱(bcrypt) 및 JWT 토큰 발급기 구현.

### Step 2. 백엔드 API 개발 (Completed ✅)
1.  **인증 서버**: 로그인, 회원가입, 권한 체크(`Owner` vs `Staff`).
2.  **상품 관리**: 메뉴 등록/수정/조회 API.
3.  **주문 엔진**: 장바구니 -> 주문 생성 -> 결제 처리(Mock) 파이프라인.

### Step 3. 프론트엔드 (POS) 개발 (Partial ✅)
1.  **Flutter 프로젝트 설정**: 의존성 패키지 설치.
2.  **API 연동**: `ApiService`를 통해 백엔드와 통신.
3.  **UI 구현**: 태블릿용 주문 화면 및 장바구니/결제 화면.
    *   *(TODO: 실제 태블릿/에뮬레이터에서의 테스트 및 빌드)*

---

## 🔗 PHASE 2: 확장 및 연결 (Expand: Booking & IoT)
**목표**: 매장 밖의 고객을 예약으로 잡고, 매장 내의 장치를 제어한다.

### Step 4. 예약/대기 시스템 (Completed ✅)
1.  **DB 확장**: `Reservation` 테이블 추가 (노쇼 방지 로직).
2.  **예약 엔진**: 시간 충돌 방지 및 예약 확정 API 구현.
3.  **연동**: 주문 시스템과 예약 시스템 연결 (예약 손님 방문 시 주문 연계).

### Step 5. IoT 장치 제어 (Completed ✅)
1.  **가상 장치(Virtual Device)**: 도어락, 전원 제어 시뮬레이터 구현.
2.  **제어 API**: 외부에서 장치를 켜고 끄는 명령 API.
3.  **권한 제어**: 내 매장의 장치만 제어하도록 보안 설정.

### Step 6. 사용자 앱 (User App) 개발 (Pending 🚧)
*   **설명**: POS(점주용)가 아닌, 일반 손님이 예약하고 주문하는 모바일 앱.
*   **작업**: Flutter 프로젝트를 확장하여 `User Mode` 추가 필요.

---

## 🤖 PHASE 3: 자동화 및 관리 (Automation & ERP)
**목표**: 사람이 하던 일을 시스템(봇)이 대신하고, 돈의 흐름을 관리한다.

### Step 7. 마케팅 자동화 (Completed ✅)
1.  **텔레그램 봇 연동**: `Telethon` 기반의 메시지 발송기.
2.  **캠페인 스케줄러**: 정해진 시간에 이벤트 알림 발송.
3.  **타겟팅**: 예약 이력이 있는 고객에게만 쿠폰 발송.

### Step 8. ERP 및 정산 (Pending 🚧)
1.  **매출 리포트**: 일별/월별 매출 집계 및 시각화.
2.  **재고 관리 (SCM)**: 주문 발생 시 재료 차감 로직.
3.  **급여 관리**: 직원 근무 시간 기록(IoT 도어락 연동) 및 급여 계산.

---

## 🚀 PHASE 4: 배포 및 운영 (Deploy & Ops)
**목표**: 개발자 컴퓨터에서 벗어나 실제 서버에서 24시간 돌아가게 한다.

### Step 9. 컨테이너화 (Docker)
1.  `Dockerfile` 작성: Python 백엔드 및 DB 컨테이너화.
2.  `docker-compose`: 전체 시스템(API + DB + Redis) 일괄 실행 구성.

### Step 10. 모니터링 (Dashboard)
1.  **Admin Dashboard**: 앞서 만든 `cli_dashboard`를 웹 버전으로 포팅.
2.  **Log System**: 에러 및 결제 로그 영구 보관 체계 구축.

---

## 📊 현재 진행 상황 요약

| 단계 | 주요 기능 | 상태 | 비고 |
|:---:|:---|:---:|:---|
| **P1** | **DB & Auth** | ✅ 100% | 기초 공사 완료 |
| **P1** | **Commerce API** | ✅ 100% | 상품/주문 서버 완성 |
| **P1** | **POS App** | ⚠️ 50% | 코드는 작성됨, 빌드/테스트 필요 |
| **P2** | **Booking/IoT** | ✅ 100% | 백엔드 로직 완성 |
| **P3** | **Marketing** | ✅ 90% | 스케줄러/발송기 완성 |
| **P3** | **ERP/Report** | ⬜ 0% | 다음 개발 대상 |

**[권장되는 다음 작업]**
현재 백엔드(서버)는 Phase 2까지 강력하게 구축되었습니다.
가장 시급한 것은 **"눈에 보이는 결과물"**의 완성입니다.

1.  **Flutter POS 앱 실행 및 테스트**: 작성해드린 코드를 실제 실행해보기.
2.  **ERP 매출 리포트 API 개발**: 돈이 얼마나 벌렸는지 확인하는 기능 추가.